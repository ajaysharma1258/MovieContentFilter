{#
 * MovieContentFilter (https://www.moviecontentfilter.com/)
 * Copyright (c) delight.im (https://www.delight.im/)
 * Licensed under the GNU AGPL v3 (https://www.gnu.org/licenses/agpl-3.0.txt)
#}
{% include 'includes/page_top.html' %}
<ol class="breadcrumb">
	<li><a href="{{ app.url('/') }}">Home</a></li>
	<li class="active">Settings</li>
</ol>
<div class="container">
	<div class="row">
		<div class="col-md-12">
			<div class="page-header"><h1 class="text-center">Settings</h1></div>
			<div class="list-group text-center">
				<a href="#change-password" class="list-group-item">Change password</a>
				<a href="#change-email" class="list-group-item">Change email address</a>
				<a href="#control-password-reset" class="list-group-item">Control password reset</a>
				<a href="#sign-out-everywhere" class="list-group-item">Sign out everywhere</a>
			</div>
			<div class="page-header"><h3 class="text-center" id="change-password">Change password</h3></div>
			<form method="post" action="{{ app.url('/settings/change-password') }}" class="form-horizontal" onsubmit="$(this).find('button').prop('disabled', true);">
				{% include 'includes/old_password_1x.html' with { 'id': 'old-password', 'name': 'old-password', 'isReset': true } only %}
				{% include 'includes/new_password_2x.html' with { 'isReset': true, 'passwordMinLength': passwordMinLength } only %}
				<div class="form-group">
					<div class="col-sm-offset-2 col-sm-10">
						<button type="submit" class="btn btn-success">Change password</button>
					</div>
				</div>
			</form>
			<div class="page-header"><h3 class="text-center" id="change-email">Change email address</h3></div>
			<form method="post" action="{{ app.url('/settings/change-email') }}" class="form-horizontal" onsubmit="$(this).find('button').prop('disabled', true);">
				{% include 'includes/old_password_1x.html' with { 'id': 'email-password', 'name': 'email-password', 'isReset': false } only %}
				<div class="form-group">
					<label for="email-1" class="col-sm-2 control-label">New email</label>
					<div class="col-sm-10">
						<input type="email" class="form-control" id="email-1" name="email-1" maxlength="249" placeholder="e.g. jane@example.com" required>
						<p class="help-block">Please enter your new email address here. You will use this to sign in afterwards. Make sure you can receive emails at this address, please.</p>
					</div>
				</div>
				<div class="form-group">
					<label for="email-2" class="col-sm-2 control-label">Repeat email</label>
					<div class="col-sm-10">
						<input type="email" class="form-control" id="email-2" name="email-2" maxlength="249" placeholder="e.g. jane@example.com" required>
						<p class="help-block">Please repeat your email address here, just to prevent any typing errors.</p>
					</div>
				</div>
				<div class="form-group">
					<div class="col-sm-offset-2 col-sm-10">
						<button type="submit" class="btn btn-success">Change email address</button>
					</div>
				</div>
			</form>
			<div class="page-header"><h3 class="text-center" id="control-password-reset">Control password reset</h3></div>
			<form method="post" action="{{ app.url('/settings/control-password-reset') }}" class="form-horizontal" onsubmit="$(this).find('button').prop('disabled', true);">
				{% include 'includes/old_password_1x.html' with { 'id': 'password-reset-password', 'name': 'password-reset-password', 'isReset': false } only %}
				<div class="form-group">
					<div class="col-sm-offset-2 col-sm-10">
						<div class="checkbox">
							<label>
								<input type="checkbox" name="password-reset-enabled" value="1"{% if passwordResetEnabled %} checked="checked"{% endif %}> Allow password resets via email for my account
							</label>
						</div>
					</div>
				</div>
				<div class="form-group">
					<div class="col-sm-offset-2 col-sm-10">
						<button type="submit" class="btn btn-success">Control password reset</button>
					</div>
				</div>
			</form>
			<div class="page-header"><h3 class="text-center" id="sign-out-everywhere">Sign out everywhere</h3></div>
			<form method="post" action="{{ app.url('/settings/sign-out-everywhere') }}" class="form-horizontal" onsubmit="$(this).find('button').prop('disabled', true);">
				<div class="form-group">
					<div class="col-sm-offset-2 col-sm-10">
						<div class="checkbox">
							<label>
								<input type="checkbox" name="current-device" value="1"> Include the current session on this device
							</label>
						</div>
					</div>
				</div>
				<div class="form-group">
					<div class="col-sm-offset-2 col-sm-10">
						<button type="submit" class="btn btn-success">Logout</button>
					</div>
				</div>
			</form>
		</div>
	</div>
</div>
{% include 'includes/page_bottom.html' %}
